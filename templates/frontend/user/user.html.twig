{% extends '@Forumify/frontend/base.html.twig' %}
{% block title_page %}
    {{ user.rank.abbreviation }} {{ user.name }}
{% endblock %}
{% block body %}
    <div class="flex justify-between mb-6">
        <div>
            <h2 class="flex gap-4 items-center">
                {{ user.name }}
                {% if user.status %}
                    {% include '@ForumifyPerscomPlugin/frontend/roster/components/status.html.twig' with {
                        status: user.status
                    } only %}
                {% endif %}
            </h2>
            <p class="text-subtitle">{{ user.rank.name ?? '' }}, {{ user.position.name ?? '' }}</p>
        </div>
        {% if forumAccount %}
            <a class="btn-primary" href="{{ path('forumify_forum_profile', { username: forumAccount.username }) }}">
                {{ 'perscom.user.forum_profile'|trans }}
            </a>
        {% endif %}
    </div>
    {% if user.cover_photo_url %}
        <div class="box text-center mb-4">
            <img height="530px" width="auto" src="{{ user.cover_photo_url }}">
        </div>
    {% endif %}
    <div class="flex gap-4">
        <div class="w-25 flex flex-col gap-4">
            {% if user.rank %}
                <div class="card">
                    <div class="card-title">{{ 'perscom.user.rank'|trans }}</div>
                    <div class="card-body flex flex-col items-center">
                        {% if user.rank.image %}
                            <img width="125px" height="auto" src="{{ user.rank.image.image_url }}" alt="">
                        {% endif %}
                        <div class="text-small">{{ user.rank.name }}</div>
                    </div>
                </div>
            {% endif %}
            <div class="card">
                <div class="card-title">{{ 'perscom.user.length_in_service'|trans }}</div>
                <div class="card-body flex flex-col">
                    <p><span class="text-bold">{{ 'perscom.user.time_in_service'|trans }}:</span> PLACEHOLDER</p>
                    <p><span class="text-bold">{{ 'perscom.user.time_in_grade'|trans }}:</span> PLACEHOLDER</p>
                </div>
            </div>
        </div>
        <div class="w-75">
            {% embed '@Forumify/components/tabs.html.twig' %}
                {% block tabs %}
                    <button class="btn-link" data-tab-id="assignment">{{ 'perscom.user.assignment'|trans }}</button>
                    <button class="btn-link" data-tab-id="service-record">{{ 'perscom.user.service_record'|trans }}</button>
                    <button class="btn-link" data-tab-id="combat-record">{{ 'perscom.user.combat_record'|trans }}</button>
                    <button class="btn-link" data-tab-id="assignment-record">{{ 'perscom.user.assignment_record'|trans }}</button>
                    <button class="btn-link" data-tab-id="qualification-record">{{ 'perscom.user.qualifications'|trans }}</button>
                {% endblock %}
                {% block tabpanels %}
                    <div id="assignment">
                        {% include '@ForumifyPerscomPlugin/frontend/user/components/assignment.html.twig' %}
                    </div>
                    <div id="service-record">
                        {{ component('RecordTable', { data: user.service_records }) }}
                    </div>
                    <div id="combat-record">
                        {{ component('RecordTable', { data: user.combat_records }) }}
                    </div>
                    <div id="assignment-record">
                        {{ component('AssignmentRecordTable', { data: user.assignment_records }) }}
                    </div>
                    <div id="qualification-record">
                        {{ component('QualificationRecordTable', { data: user.qualification_records }) }}
                    </div>
                {% endblock %}
            {% endembed %}
        </div>
    </div>
{% endblock %}
